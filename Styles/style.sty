%%% Packages

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage[english]{babel}
% \usepackage[italian,dutch,english]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{microtype}

% \usepackage{concrete} % Concrete font
\usepackage{palatino} % Palatino font
\usepackage{mathdots}
\usepackage[euler-hat-accent,euler-digits]{eulervm}
%%\usepackage{eucal} %%% usare \mathcal{}
%%\usepackage[mathscr]{eucal} %%%usare \mathscr{testo}

\usepackage{enumerate}
\usepackage{mathrsfs}
\usepackage{mathtools}
\usepackage{graphicx}
% \usepackage{accsupp} % Get better Unicode representation of glyphs constructs
%\usepackage{subfigure}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{wrapfig}

\usepackage{float}
\usepackage{color}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\definecolor{mylightgray}{rgb}{0.95,0.95,0.95}
\usepackage{listings}
\lstset{ %
  language=Matlab,
  frame=none, % default is none, tb to be used with float listings
  aboveskip=5mm,
  belowskip=5mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3,
  mathescape=true,
  captionpos=t,
  backgroundcolor=\color{mylightgray}
}
\captionsetup[lstlisting]{font={scriptsize}}
% \usepackage[a4paper,bindingoffset=1cm,marginparsep=0.7cm,marginparwidth=2.5cm]{geometry}
\usepackage[pdfborder={0 0 0.3 [2 0]}]{hyperref}
\hypersetup{ % No ugly boxes, but slightly colored text
    colorlinks,
    linkcolor={red!25!black},
    citecolor={blue!25!black},
    urlcolor={blue!80!black}
}

%Strikethrough
% \usepackage{soul}

%Tabular rows
\usepackage{booktabs}

\usepackage{marginnote}
\usepackage{xspace}
\usepackage{stmaryrd}
\usepackage{breqn}         % automatic equation breaking

\usepackage{csquotes}      % provides the \enquote{} command for nice inline quotes and \blockquote{} for blocks.

% \usepackage[framemethod=default]{mdframed} % Make text boxes
\usepackage[framemethod=tikz]{mdframed}
\usetikzlibrary{calc,arrows}

\mdfdefinestyle{tips}{%
  innerleftmargin=10,
  innerrightmargin=10,
  frametitlerule=false,
  topline=true,
  bottomline=false,
  leftline=true,
  rightline=false,
  backgroundcolor=mylightgray}

\makeatletter
\mdf@do@stringoption{digressiontitle=={Digression}}
\tikzset{
  excursus arrow/.style={%
       line width=2pt,
      draw=gray!40,
      rounded corners=2ex,
      },
   excursus head/.style={
      fill=white,
      font=\bfseries\sffamily,
      text=gray!80,
      anchor=base west,
  },
}
\mdfdefinestyle{digressionarrows}{%
   singleextra={%
            \path let \p1=(P), \p2=(O) in (\x2,\y1) coordinate (Q);
            \path let \p1=(Q), \p2=(O) in (\x1,{(\y1-\y2)/2}) coordinate (M);
            \path [excursus arrow, round cap-to]
                        ($(O)+(0.2\linewidth,0ex)$) -| (M) |- %
                        ($(Q)+(0.5\linewidth,0ex)$) .. controls +(0:0.1\linewidth) and +(190:5em) .. %
                        ++(0.4\linewidth,1.5ex);
            \node [excursus head] at ($(Q)+(0.075\linewidth,-0.75pt)$) {\mdf@digressiontitle};},
   firstextra={%
            \path let \p1=(P), \p2=(O) in (\x2,\y1) coordinate (Q);
            \path [excursus arrow,-to] (O) |- %
                        ($(Q)+(12em,0ex)$) .. controls +(0:16em) and +(185:6em) .. %
                        ++(23em,2ex);
            \node [excursus head] at ($(Q)+(2.5em,-2pt)$) {\mdf@digressiontitle};},
   secondextra={%
            \path let \p1=(P), \p2=(O) in (\x2,\y1) coordinate (Q);
            \path [excursus arrow,round cap-]($(O)+(5em,0ex)$) -| (Q);},
   middleextra={%
            \path let \p1=(P), \p2=(O) in (\x2,\y1) coordinate (Q);
            \path [excursus arrow](O) -- (Q);},
   middlelinewidth=2.5em,middlelinecolor=white,
   hidealllines=true,topline=true,
   innertopmargin=0.5ex,
   innerbottommargin=0.75ex,
   innerrightmargin=2pt,
   innerleftmargin=2ex,
   skipabove=0.87\baselineskip,
   skipbelow=0.62\baselineskip,
}
\makeatother

\newmdenv[style=digressionarrows,digressiontitle=Matlab tip]{matlabtip}

%%% Styles

\theoremstyle{plain}
\newtheorem{Teo}{Theorem}[section]
\newtheorem{Theorem}{Theorem}[section]
\newtheorem{Lemma}[Teo]{Lemma}
\newtheorem{Cor}[Teo]{Corollary}
\newtheorem{Corollary}[Teo]{Corollary}
%\newtheorem*{th*}{Theorem}

\theoremstyle{remark}
\newtheorem{Rem}{Remark}
\newtheorem{Remark}{Remark}

\theoremstyle{definition}
\newtheorem{Def}[Teo]{Definition}
\newtheorem{Definition}[Teo]{Definition}
\newtheorem{Ex}[Teo]{Example}
\newtheorem{Example}[Teo]{Example}
%\newtheorem*{def*}{Definition}

%%% Equation numbering within sections
\numberwithin{equation}{section}

%%% Itemize with a custom item symbol
\def\labelitemi{$\circ$}
%\def\labelitemi{$\odot$}

%%EOF
